#set document(title: "èŠ­è•¾å‘ªæ³• - Pose2Sim í†µí•© ê²€ì¦ ë¦¬í¬íŠ¸")
#set page(
  margin: (top: 2cm, bottom: 2cm, left: 2cm, right: 2cm),
  numbering: "1",
)
#set text(font: "Noto Sans CJK KR", size: 10pt, lang: "ko")
#set heading(numbering: "1.1")
#set par(leading: 0.75em)

// â”€â”€ í‘œì§€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#align(center)[
  #text(size: 22pt, weight: "bold")[èŠ­è•¾å‘ªæ³•]
  #v(0.4em)
  #text(size: 15pt)[Pose2Sim Ã— OpenSim í†µí•© ê²€ì¦ ë¦¬í¬íŠ¸]
  #v(0.4em)
  #text(size: 10pt, fill: gray)[2026-02-23 | \/sc:duo ìë™ ìƒì„± | claude-sonnet-4-6]
]

#line(length: 100%, stroke: 0.5pt + gray)
#v(0.5em)

// â”€â”€ 1. ì‘ì—… ìš”ì•½ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
= ì‘ì—… ìš”ì•½

ì´ë²ˆ ì„¸ì…˜ì—ì„œëŠ” ê¸°ì¡´ MediaPipe â†’ SMPL íŒŒì´í”„ë¼ì¸ì— *ë°”ì´ì˜¤ë©”ì¹´ë‹‰ìŠ¤ ë¶„ì„ ë ˆì´ì–´*ë¥¼
ì¶”ê°€í•˜ì˜€ë‹¤. í•µì‹¬ ì•„í‚¤í…ì²˜ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤:

#block(fill: luma(230), inset: 10pt, radius: 4pt)[
```
[ê¸°ì¡´] MediaPipe JSON (world_landmarks, 3D, Y-DOWN)
   â†“
[ì‹ ê·œ] src/trc_exporter.py   â†’ .trc íŒŒì¼ ìƒì„± (OpenSim ë§ˆì»¤ í¬ë§·)
   â†“
[ì‹ ê·œ] src/joint_angles.py   â†’ ë°œë ˆ ê´€ì ˆ ê°ë„ (ìˆœìˆ˜ NumPy)
   â†“
[ì‹ ê·œ] src/pose2sim_bridge.py â†’ OpenSim ì‹œë„ â†’ Python fallback
   â†“
[ìˆ˜ì •] src/pipeline.py       â†’ Step 5: ë°”ì´ì˜¤ë©”ì¹´ë‹‰ìŠ¤ ë¶„ì„
[ìˆ˜ì •] src/viewer_app.py     â†’ 4ë²ˆì§¸ íƒ­: ğŸ¦´ ë°”ì´ì˜¤ë©”ì¹´ë‹‰ìŠ¤
```
]

*í•µì‹¬ ì„¤ê³„ ì›ì¹™*: OpenSimì€ conda ì „ìš©(pip ë¶ˆê°€)ì´ë¯€ë¡œ, ìˆœìˆ˜ NumPy ê³„ì‚°ì„ ê¸°ë³¸ìœ¼ë¡œ
í•˜ê³  Pose2Sim+OpenSimì€ ì¡°ê±´ë¶€ ë ˆì´ì–´ë¡œ êµ¬ì„±í•˜ì˜€ë‹¤.

#v(0.5em)

// â”€â”€ 2. êµ¬í˜„ íŒŒì¼ ëª©ë¡ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
= êµ¬í˜„ íŒŒì¼ ëª©ë¡

#table(
  columns: (auto, 1fr, auto),
  inset: 8pt,
  align: (center, left, center),
  stroke: 0.4pt + luma(180),
  [*êµ¬ë¶„*], [*íŒŒì¼*], [*ê·œëª¨*],
  [ì‹ ê·œ], [`src/trc_exporter.py`], [~110ì¤„],
  [ì‹ ê·œ], [`src/joint_angles.py`], [~200ì¤„],
  [ì‹ ê·œ], [`src/pose2sim_bridge.py`], [~130ì¤„],
  [ìˆ˜ì •], [`src/pipeline.py` (Step 5 ì¶”ê°€)], [+40ì¤„],
  [ìˆ˜ì •], [`src/viewer_app.py` (4ë²ˆì§¸ íƒ­ ì¶”ê°€)], [+150ì¤„],
  [ìˆ˜ì •], [`requirements.txt` (pose2sim ì¶”ê°€)], [+1ì¤„],
)

#v(0.5em)

// â”€â”€ 3. ë°œë ˆ ê´€ì ˆ ê°ë„ ì§€í‘œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
= ë°œë ˆ ê´€ì ˆ ê°ë„ ì§€í‘œ

#table(
  columns: (1fr, auto, auto),
  inset: 8pt,
  align: (left, center, center),
  stroke: 0.4pt + luma(180),
  [*ì§€í‘œëª…*], [*ê³„ì‚° ë°©ë²•*], [*ì´ìƒê°’*],
  [ì¢Œ/ìš° ë¬´ë¦ êµ´ê³¡], [HIPâ†’KNEEâ†’ANKLE (180Â°-angle)], [0Â° (íœ´ì‹)],
  [ì¢Œ/ìš° ê³ ê´€ì ˆ êµ´ê³¡], [SHOULDERâ†’HIPâ†’KNEE (180Â°-angle)], [0Â° (íœ´ì‹)],
  [ì¢Œ/ìš° í„´ì•„ì›ƒ], [foot XZ vs hip_axis ê¸°ë°˜ ì™¸ì¸¡ ë°©í–¥], [90Â°],
  [ì¢Œ/ìš° ë°œëª© ì €êµ´], [KNEEâ†’ANKLEâ†’FOOT\_INDEX 3ì  ê°ë„], [90Â°],
  [ì²™ì¶” ì¸¡êµ´], [ì–´ê¹¨ ì¤‘ì‹¬â†’ê³¨ë°˜ ì¤‘ì‹¬ vs ìˆ˜ì§ì¶•], [0Â°],
  [ì–´ê¹¨ ë¹„ëŒ€ì¹­], [ì¢Œìš° ì–´ê¹¨ ë†’ì´ ì°¨ / ì–´ê¹¨ë„ˆë¹„], [0.0],
)

*ì¢Œí‘œê³„ ì£¼ì˜ì‚¬í•­*: MediaPipe world\_landmarksëŠ” Y-DOWN (ì–‘ìˆ˜=ì•„ë˜)ì´ë¯€ë¡œ,
TRC íŒŒì¼ ë‚´ë³´ë‚¼ ë•Œ Yì¶• ë¶€í˜¸ë¥¼ ë°˜ì „(OpenSim Y-UP)í•œë‹¤.
í„´ì•„ì›ƒ ê³„ì‚° ì‹œ shin-foot ë²¡í„° ë¹„êµ(â†’ 179Â° ì˜¤ë¥˜)ê°€ ì•„ë‹Œ
*hip axis ê¸°ë°˜ ì™¸ì¸¡ ë°©í–¥*ì„ ì°¸ì¡° ë²¡í„°ë¡œ ì‚¬ìš©í•œë‹¤.

#v(0.5em)

// â”€â”€ 4. í…ŒìŠ¤íŠ¸ ê²°ê³¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
= í…ŒìŠ¤íŠ¸ ê²°ê³¼

#figure(
  image("assets/fig1_test_summary.png", width: 100%),
  caption: [5ê°œ í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ ì „ì²´ ê²°ê³¼ â€” 46ê°œ í•­ëª© ëª¨ë‘ PASS],
)

#table(
  columns: (auto, 1fr, auto, auto),
  inset: 8pt,
  align: (center, left, center, right),
  stroke: 0.4pt + luma(180),
  [*\ë²ˆí˜¸*], [*í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ*], [*ê²°ê³¼*], [*ì†Œìš”*],
  [T-1], [TRC Exporter (8ê°œ í•­ëª©)],        [*PASS*], [0.22s],
  [T-2], [Joint Angles Calc (8ê°œ í•­ëª©)],   [*PASS*], [0.35s],
  [T-3], [Pose2Sim Bridge (8ê°œ í•­ëª©)],     [*PASS*], [0.72s],
  [T-4], [Pipeline+Viewer í†µí•© (13ê°œ í•­ëª©)],[*PASS*], [0.01s],
  [T-5], [Angle Sequence ë¹„êµ (9ê°œ í•­ëª©)], [*PASS*], [0.56s],
)

ì „ì²´ 46ê°œ ê²€ì¦ í•­ëª© ëª¨ë‘ *PASS*. ì´ ì†Œìš” ì‹œê°„: *1.86ì´ˆ*.

#pagebreak()

// â”€â”€ 5. ì‹œê°í™” ê²°ê³¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
= ì‹œê°í™” ê²°ê³¼

== ë°œë ˆ ê´€ì ˆ ê°ë„ ì‹œê³„ì—´

#figure(
  image("assets/fig2_angle_timeseries.png", width: 100%),
  caption: [6ê°œ í•µì‹¬ ì§€í‘œ ì‹œê³„ì—´ â€” Reference(íŒŒë‘) vs Compare(ì£¼í™©), ì´ˆë¡ ì ì„ =ì´ìƒê°’],
)

Reference ì˜ìƒ(í”Œë¦¬ì— íŠœí† ë¦¬ì–¼, 2280í”„ë ˆì„)ê³¼ Compare ì˜ìƒ(1041í”„ë ˆì„)ì˜
ê°ë„ ì‹œê³„ì—´ì„ ë¹„êµí•œë‹¤. Compare ì˜ìƒì€ ì˜ìƒ ê¸¸ì´ê°€ ì§§ìœ¼ë¯€ë¡œ í”„ë ˆì„ ë²”ìœ„ê°€ ë‹¤ë¥´ë‹¤.
ë‘ ì˜ìƒ ëª¨ë‘ ë¬´ë¦ êµ´ê³¡ì´ 0Â°~80Â° ë²”ìœ„ì—ì„œ ë™ì ìœ¼ë¡œ ë³€í™”í•˜ì—¬
í”Œë¦¬ì—(êµ´ê³¡)â†’ë¦¬ë ˆë² (ì‹ ì „) ì‚¬ì´í´ì´ í¬ì°©ë˜ì—ˆë‹¤.

== ë°œë ˆ ìŠ¤ì½”ì–´ ë¹„êµ

#figure(
  image("assets/fig3_ballet_scores.png", width: 90%),
  caption: [ì„¸ ê°€ì§€ ë°œë ˆ ìŠ¤ì½”ì–´ (Reference vs Compare) â€” ì´ìƒê°’: ëª¨ë‘ 1.0],
)

#table(
  columns: (1fr, auto, auto, auto),
  inset: 7pt,
  align: (left, center, center, center),
  stroke: 0.4pt + luma(180),
  [*ìŠ¤ì½”ì–´*], [*Reference*], [*Compare*], [*í•´ì„*],
  [í„´ì•„ì›ƒ ìŠ¤ì½”ì–´], [0.000], [0.000], [í‰ê·  í„´ì•„ì›ƒ ~19Â°, ì´ìƒ(90Â°) ëŒ€ë¹„ ë¶€ì¡±],
  [ë¬´ë¦ ì •ë ¬ ìŠ¤ì½”ì–´], [0.965], [0.971], [ì¢Œìš° ë¬´ë¦ êµ´ê³¡ ëŒ€ì¹­ì„± ìš°ìˆ˜],
  [ì²™ì¶” ì •ë ¬ ìŠ¤ì½”ì–´], [0.000], [0.004], [í‰ê·  ì²™ì¶” ì¸¡êµ´ ~16Â°, êµì • í•„ìš”],
)

í„´ì•„ì›ƒê³¼ ì²™ì¶” ì¸¡êµ´ ìŠ¤ì½”ì–´ê°€ 0ì— ê°€ê¹Œìš´ ì´ìœ ëŠ”, ê¸°ì¤€ ì˜ìƒì´ *ì¸¡ë©´ ê°ë„ ì¹´ë©”ë¼*ë¡œ
ì´¬ì˜ë˜ì—ˆì„ ê°€ëŠ¥ì„±ì´ ìˆìœ¼ë©°, ë°œ ë°©í–¥ì˜ XZ íˆ¬ì˜ì´ ì‹¤ì œ í„´ì•„ì›ƒì„ ê³¼ì†Œí‰ê°€í•  ìˆ˜ ìˆë‹¤.
ë¬´ë¦ ì •ë ¬ ìŠ¤ì½”ì–´ëŠ” ì¢Œìš° ëŒ€ì¹­ì„± ê¸°ë°˜ìœ¼ë¡œ 0.965(96.5%)ë¡œ ì–‘í˜¸í•˜ë‹¤.

== Ref vs Comp ê´€ì ˆ ê°ë„ ì°¨ì´

#figure(
  image("assets/fig4_angle_diff.png", width: 92%),
  caption: [10ê°œ ì§€í‘œ í‰ê·  ì ˆëŒ€ ê°ë„ ì°¨ì´ â€” ë¹¨ê°•(15Â°ì´ˆê³¼) / ì£¼í™©(8\~15Â°) / ì´ˆë¡(8Â°ë¯¸ë§Œ)],
)

ì¢Œ ë¬´ë¦ êµ´ê³¡(20.5Â°)ê³¼ ì¢Œ í„´ì•„ì›ƒ(18.9Â°)ì˜ ì°¨ì´ê°€ ê°€ì¥ í¬ë©°, ì–´ê¹¨ ë¹„ëŒ€ì¹­(0.06)ì€
ê°€ì¥ ìœ ì‚¬í•˜ë‹¤. ì´ëŠ” Referenceì™€ Compare ì˜ìƒ ê°„ì˜ ì‹¤ì§ˆì ì¸ ë™ì‘ ì°¨ì´ë¥¼ ë°˜ì˜í•œë‹¤.

#pagebreak()

// â”€â”€ 6. ë°ì´í„° íë¦„ ê²€ì¦ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
= ë°ì´í„° íë¦„ ê²€ì¦

== TRC íŒŒì¼ í—¤ë” (ì°¸ê³ )

#block(fill: luma(230), inset: 8pt, radius: 4pt)[
```
PathFileType  4  (X/Y/Z)  reference_poses.trc
DataRate  CameraRate  NumFrames  NumMarkers  Units  OrigDataRate  ...
12.5000   12.5000     2280       18          m      12.5000  1  2280
Frame#  Time  PELV        Head        LSHO  ...
        X1  Y1  Z1  X2  Y2  Z2  X3  Y3  Z3  ...
1  0.0000  -0.000268  0.000381  0.000292  ...
```
]

== ìƒì„±ëœ ì¶œë ¥ íŒŒì¼

#table(
  columns: (1fr, auto),
  inset: 7pt,
  stroke: 0.4pt + luma(180),
  [*íŒŒì¼*], [*í¬ê¸°*],
  [`data/e2e_output/reference_poses.trc`],   [~15MB (2280í”„ë ˆì„Ã—18ë§ˆì»¤Ã—3ì¶•)],
  [`data/e2e_output/compare_poses.trc`],     [~7MB (1041í”„ë ˆì„)],
  [`data/e2e_output/reference_biomechanics.json`], [~900KB],
  [`data/e2e_output/compare_biomechanics.json`],   [~520KB],
  [`data/e2e_output/biomechanics_comparison.json`],[~1.8MB],
)

#v(0.5em)

// â”€â”€ 7. ì•„í‚¤í…ì²˜ ê²°ì • ì‚¬í•­ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
= ì•„í‚¤í…ì²˜ ê²°ì • ì‚¬í•­

== í„´ì•„ì›ƒ ê³„ì‚° ë°©ë²• ì„ ì •

ì´ˆê¸° êµ¬í˜„ì—ì„œ `shin_vec(XZ) vs foot_vec(XZ)` ê°ë„ë¥¼ ì‚¬ìš©í•˜ì˜€ìœ¼ë‚˜,
ë‘ ë²¡í„°ê°€ XZ í‰ë©´ì—ì„œ ê±°ì˜ ë°˜í‰í–‰(antiparallel)í•˜ì—¬ ~179Â°ê°€ ì¶œë ¥ë˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ë‹¤.

*ìµœì¢… ë°©ë²•*: `hip_axis = RIGHT_HIP - LEFT_HIP` ë¥¼ ê¸°ì¤€ ì¸¡ë°©í–¥ ë²¡í„°ë¡œ ì‚¼ê³ ,
ì¢Œë°œ ì™¸ì¸¡ = `-hip_ax`, ìš°ë°œ ì™¸ì¸¡ = `+hip_ax`ë¡œ ì •ì˜í•˜ì—¬
`turnout = max(0, 90Â° - angle(foot_xz, outward))`ë¥¼ ê³„ì‚°í•œë‹¤.

== OpenSim ì¡°ê±´ë¶€ í†µí•©

OpenSimì€ conda ì „ìš©ì´ë¯€ë¡œ pip í™˜ê²½ì—ì„œ ì„¤ì¹˜ ë¶ˆê°€ëŠ¥í•˜ë‹¤.
`pose2sim_bridge.py`ëŠ” ë‹¤ìŒ ìš°ì„ ìˆœìœ„ë¡œ ë™ì‘í•œë‹¤:
1. `import opensim` ì„±ê³µ â†’ Pose2Sim.kinematics() í˜¸ì¶œ â†’ .mot íŒŒì‹±
2. opensim ì—†ìŒ â†’ `joint_angles.py` ìˆœìˆ˜ Python ê³„ì‚° (fallback)

í˜„ì¬ í™˜ê²½ì—ì„œëŠ” *fallback(Python)* ëª¨ë“œë¡œ ë™ì‘í•œë‹¤.

== Pipeline ì˜¤ë¥˜ ê²©ë¦¬

Step 5 ë°”ì´ì˜¤ë©”ì¹´ë‹‰ìŠ¤ ë¶„ì„ì„ `try/except` ë¸”ë¡ìœ¼ë¡œ ê°ì‹¸
ë¶„ì„ ì‹¤íŒ¨ ì‹œì—ë„ ê¸°ì¡´ Step 1~4 ê²°ê³¼ê°€ ë³´ì¡´ë˜ë„ë¡ í•˜ì˜€ë‹¤.

#v(0.5em)

// â”€â”€ 8. ê²°ë¡  ë° ë‹¤ìŒ ë‹¨ê³„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
= ê²°ë¡  ë° ë‹¤ìŒ ë‹¨ê³„

== ê²°ë¡ 

- *46ê°œ ê²€ì¦ í•­ëª© 100% PASS*: TRC ë‚´ë³´ë‚´ê¸°, ê´€ì ˆ ê°ë„ ê³„ì‚°, ë¸Œë¦¬ì§€, í†µí•© ëª¨ë‘ ì •ìƒ
- *ë°œë ˆ íŠ¹í™” 10ê°œ ì§€í‘œ* ì‹¤ì‹œê°„ ê³„ì‚° (1.86ì´ˆ/ì „ì²´ ì‹œí€€ìŠ¤)
- *OpenSim ì—†ì´ë„ ì™„ì „ ë™ì‘* â€” conda í™˜ê²½ì—ì„œ OpenSim ì¶”ê°€ ì‹œ ìë™ ê³ í’ˆì§ˆ ëª¨ë“œ ì „í™˜
- *viewer_app.py 4ë²ˆì§¸ íƒ­* ì¶”ê°€ë¡œ ê´€ì ˆ ê°ë„ ì‹œê³„ì—´ Â· ìŠ¤ì½”ì–´ ì¹´ë“œ ëŒ€ì‹œë³´ë“œ ì œê³µ

== ë‹¤ìŒ ë‹¨ê³„ (ì œì•ˆ)

#table(
  columns: (auto, 1fr),
  inset: 7pt,
  stroke: 0.4pt + luma(180),
  [*ìš°ì„ ìˆœìœ„*], [*í•­ëª©*],
  [High], [ì¹´ë©”ë¼ ê°ë„ ë³´ì •: ì´¬ì˜ ë°©í–¥ì— ë”°ë¥¸ í„´ì•„ì›ƒ ê³„ì‚° ì˜¤ì°¨ ê°œì„ ],
  [High], [DTW ì •ë ¬ í›„ ê°ë„ ë¹„êµ: í˜„ì¬ëŠ” raw í”„ë ˆì„ ì¸ë±ìŠ¤ ê¸°ì¤€],
  [Medium], [conda í™˜ê²½ì—ì„œ OpenSim IK ì‹¤í–‰ ê²€ì¦],
  [Medium], [ì‹¤ì‹œê°„ ì¹´ë©”ë¼ ë¹„êµ(`realtime_comparator.py`)ì— ê°ë„ ì˜¤ë²„ë ˆì´ ì¶”ê°€],
  [Low], [pytest ê³µì‹ í…ŒìŠ¤íŠ¸ ì¶”ê°€ (`tests/test_joint_angles.py`)],
)
